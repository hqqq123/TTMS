{% extends 'base.html' %}
{% block title %}修改密码页面{% endblock %}
{% block content %}
      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <!--main content start-->

            <h3><i class="fa fa-angle-right"></i> Form Modify Password</h3>

          	<!-- BASIC FORM ELELEMNTS -->
          	<div class="row mt">
          		<div class="col-lg-12">
                  <div class="form-panel">
                  	  <h4 class="mb"><i class="fa fa-angle-right"></i> 修改密码</h4>
                      {% for message in messages %}
                        <div class="alert alert-warning alert-dismissible" role="alert">
                          <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                          <strong>{{ message }}</strong>
                        </div>





                    {% endfor %}
                      <form class="form-horizontal style-form" method="post" action="{% url 'account_pwd'%}">


                            {% csrf_token %}
{#                            {{ form }}#}


                          <div class="form-group">
                              <label  class="col-sm-2 col-sm-2 control-label">用户名</label>
                              <div class="col-sm-10">
                                  <input type="email" disabled="disabled" name="email" class="form-control round-form" value="{{ account.email }}">
                              </div>
                          </div>
                          <div class="form-group">
                              <label  class="col-sm-2 col-sm-2 control-label">旧密码</label>
                              <div class="col-sm-10">
                                  <input type="password" name="old_password" id="old_password" class="form-control round-form" placeholder="请输入旧密码">
                                  <span style="color: red" id="old_pwd"></span>
                              </div>
                          </div>
                        <div class="form-group">
                              <label  class="col-sm-2 col-sm-2 control-label">新密码</label>
                              <div class="col-sm-10">
                                  <input type="password" name="new_password" id="new_password" class="form-control round-form" placeholder="请输入新密码" onblur="check_old_password()">
                                <span style="color: red" id="new_pwd"></span>
                              </div>
                          </div>
                          <div class="form-group">
                              <label  class="col-sm-2 col-sm-2 control-label">确认密码</label>
                              <div class="col-sm-10">
                                  <input  type="password" name="repassword" id="re_password" class="form-control round-form" placeholder="请再次输入新密码" onblur="check_password()">
                                    <span style="color: red" id="re_pwd"></span>
                              </div>
                          </div>



                          <div class="form-group">
                              <div class="col-sm-12">
                                  <input class="btn btn-theme" type="submit" value="修改密码">
                              </div>

                          </div>


                      </form>
                  </div>
          		</div><!-- col-lg-12-->
          	</div><!-- /row -->

      <!--main content end-->
    <script>

        function check_password() {

            var new_pwd=document.getElementById("new_password");
            var new_sp=document.getElementById("new_pwd");

            var re_pwd=document.getElementById("re_password");
            var re_sp=document.getElementById("re_pwd");

            {#var old_pwd=document.getElementById("old_password");#}
            {#var old_sp=document.getElementById("old_pwd");#}

            if(new_pwd.value!=re_pwd.value){
                re_pwd.style="border: 1px solid red";
                re_sp.innerText="两次密码不一样！"

            }
            else {
                repwd.style="";
                sp.innerText=""
            }

        }
        function check_old_password() {

            var new_pwd=document.getElementById("new_password");
            var new_sp=document.getElementById("new_pwd");

            var old_pwd=document.getElementById("old_password");
            var old_sp=document.getElementById("old_pwd");

            if(new_pwd.value==old_pwd.value){
                new_pwd.style="border: 1px solid red";
                new_sp.innerText="新密码不能与旧密码一样";
            }
            else {
                new_pwd.style="";
                new_sp.innerText="";
            }

        }

    </script>

{% endblock %}